(function(g,e){"function"===typeof define&&define.amd?define([],e):"object"===typeof module&&module.exports?module.exports=e():g.Rellax=e()})(this,function(){var g=function(e,l){var b=Object.create(g.prototype),f=0,k=0,d=[],m=!1,v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1E3/60)},w=window.transformProp||function(){var a=document.createElement("div");if(null==
        a.style.transform){var b=["Webkit","Moz","ms"],c;for(c in b)if(void 0!==a.style[b[c]+"Transform"])return b[c]+"Transform"}return"transform"}(),n=function(a,b,c){return a<=b?b:a>=c?c:a};b.options={speed:-2,center:!1,round:!0};l&&Object.keys(l).forEach(function(a){b.options[a]=l[a]});b.options.speed=n(b.options.speed,-10,10);e||(e=".rellax");var q=document.querySelectorAll(e);if(0<q.length)b.elems=q;else throw Error("The elements you're trying to select don't exist.");var x=function(a){var h=a.dataset.rellaxPercentage,
    c=a.dataset.rellaxSpeed,d=h||b.options.center?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0,e=d+a.getBoundingClientRect().top,g=a.clientHeight||a.offsetHeight||a.scrollHeight,f=h?h:(d-e+k)/(g+k);b.options.center&&(f=.5);d=c?n(c,-10,10):b.options.speed;if(h||b.options.center)d=n(c||b.options.speed,-5,5);h=r(f,d);a=a.style.cssText;c="";0<=a.indexOf("transform")&&(c=a.indexOf("transform"),c=a.slice(c),c=(f=c.indexOf(";"))?" "+c.slice(11,f).replace(/\s/g,""):" "+c.slice(11).replace(/\s/g,
        ""));return{base:h,top:e,height:g,speed:d,style:a,transform:c}},t=function(){var a=f;f=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return a!=f?!0:!1},r=function(a,d){var c=100*d*(1-a);return b.options.round?Math.round(c):c},u=function(){t()&&!1===m&&p();v(u)},p=function(){for(var a=0;a<b.elems.length;a++){var e="translate3d(0,"+(r((f-d[a].top+k)/(d[a].height+k),d[a].speed)-d[a].base)+"px,0) "+d[a].transform;b.elems[a].style[w]=
    e}};b.destroy=function(){console.log("resetting");for(var a=0;a<b.elems.length;a++)console.log(d[a]),b.elems[a].style.cssText=d[a].style;m=!0};(function(){k=window.innerHeight;t();for(var a=0;a<b.elems.length;a++){var e=x(b.elems[a]);d.push(e)}window.addEventListener("resize",function(){!1===m&&p()});u();p()})();return b};return g});